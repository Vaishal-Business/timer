<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SCA Timer</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: 'Inter', sans-serif;
    background-color: #ffffff;
    color: #1a1a1a;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
}
.container { max-width:400px; width:100%; padding:20px; }
.timer-card {
    background:#ffffff;
    border-radius:20px;
    padding:40px 30px;
    text-align:center;
    box-shadow:0 4px 20px rgba(0,0,0,0.08);
}

.title { font-size:28px; font-weight:600; margin-bottom:30px; }

.time-input { display:flex; justify-content:center; gap:20px; margin-bottom:40px; }

.time-unit { display:flex; flex-direction:column; align-items:center; gap:8px; }

.time-value { font-size:32px; font-weight:600; min-width:40px; text-align:center; }

.time-label { font-size:12px; color:#6b7280; text-transform:uppercase; }

.arrow {
    width:40px;
    height:24px;
    cursor:pointer;
    transition: transform 0.2s;
}

/* Up triangle */
.arrow-up {
    clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
    background:#1a1a1a;
    border-radius:4px 4px 2px 2px;
}

/* Down triangle */
.arrow-down {
    clip-path: polygon(0% 0%, 100% 0%, 50% 100%);
    background:#1a1a1a;
    border-radius:2px 2px 4px 4px;
}

.arrow:hover { transform: scale(1.1); }

.timer-display { margin-bottom:30px; }
.timer-text { font-size:48px; font-weight:600; margin-bottom:16px; }
.timer-text.warning { color:#dc2626; }

.phase-text { font-size:16px; font-weight:500; color:#6b7280; min-height:20px; margin-bottom:30px; }

.controls { display:flex; gap:12px; justify-content:center; margin-bottom:20px; }
.control-btn {
    padding:12px 24px;
    border:1px solid #e5e7eb;
    background:#ffffff;
    border-radius:12px;
    font-size:14px;
    font-weight:500;
    color:#1a1a1a;
    cursor:pointer;
    transition: all 0.2s ease;
    min-width:80px;
}
.control-btn:hover:not(:disabled) { background:#f9fafb; border-color:#d1d5db; }
.control-btn:disabled { opacity:0.5; cursor:not-allowed; }
.control-btn.primary { background:#1a1a1a; color:#fff; border-color:#1a1a1a; }
.control-btn.primary:hover:not(:disabled) { background:#374151; }

</style>
</head>
<body>

<div class="container">
    <div class="timer-card">
        <h1 class="title" id="main-title">Timer</h1>

        <div class="time-input">
            <div class="time-unit">
                <div class="arrow arrow-up" id="hour-up"></div>
                <div class="time-value" id="hours">12</div>
                <div class="arrow arrow-down" id="hour-down"></div>
                <div class="time-label">HR</div>
            </div>
            <div class="time-unit">
                <div class="arrow arrow-up" id="minute-up"></div>
                <div class="time-value" id="minutes">00</div>
                <div class="arrow arrow-down" id="minute-down"></div>
                <div class="time-label">MIN</div>
            </div>
            <div class="time-unit">
                <div class="arrow arrow-up" id="second-up"></div>
                <div class="time-value" id="seconds">00</div>
                <div class="arrow arrow-down" id="second-down"></div>
                <div class="time-label">SEC</div>
            </div>
        </div>

        <div class="timer-display">
            <div class="timer-text" id="timer">12:00:00</div>
            <div class="phase-text" id="phase-text"></div>
        </div>

        <div class="controls">
            <button class="control-btn primary" id="start-btn">Start</button>
            <button class="control-btn" id="pause-btn" disabled>Pause</button>
            <button class="control-btn" id="reset-btn">Reset</button>
        </div>
    </div>
</div>
<audio id="completion-sound" src="./alarm.mp3" preload="auto"></audio>
<script>
class SCATimer {
    constructor() {
        this.hoursEl = document.getElementById('hours');
        this.minutesEl = document.getElementById('minutes');
        this.secondsEl = document.getElementById('seconds');
        this.timerEl = document.getElementById('timer');
        this.phaseEl = document.getElementById('phase-text');
        this.startBtn = document.getElementById('start-btn');
        this.pauseBtn = document.getElementById('pause-btn');
        this.resetBtn = document.getElementById('reset-btn');
        this.titleEl = document.getElementById('main-title');
        this.audioEl = document.getElementById('completion-sound');

        this.isRunning = false;
        this.interval = null;

        // ensure initial totalSeconds is valid
        this.remainingTime = this.getTotalSeconds();

        this.bindEvents();
        this.updateDisplay();
        this.updatePhase();
    }

    getTotalSeconds() {
        let h = parseInt(this.hoursEl.textContent) || 0;
        let m = parseInt(this.minutesEl.textContent) || 0;
        let s = parseInt(this.secondsEl.textContent) || 0;
        return h * 3600 + m * 60 + s;
    }

    bindEvents() {
        // arrows
        document.getElementById('hour-up').addEventListener('click', () => this.adjustTime('hours', 1));
        document.getElementById('hour-down').addEventListener('click', () => this.adjustTime('hours', -1));
        document.getElementById('minute-up').addEventListener('click', () => this.adjustTime('minutes', 1));
        document.getElementById('minute-down').addEventListener('click', () => this.adjustTime('minutes', -1));
        document.getElementById('second-up').addEventListener('click', () => this.adjustTime('seconds', 1));
        document.getElementById('second-down').addEventListener('click', () => this.adjustTime('seconds', -1));

        // controls
        this.startBtn.addEventListener('click', () => this.start());
        this.pauseBtn.addEventListener('click', () => this.pause());
        this.resetBtn.addEventListener('click', () => this.reset());
    }

    adjustTime(unit, delta) {
        if (this.isRunning) return;

        let h = parseInt(this.hoursEl.textContent);
        let m = parseInt(this.minutesEl.textContent);
        let s = parseInt(this.secondsEl.textContent);

        if (unit === 'hours') h = Math.max(0, Math.min(99, h + delta));
        if (unit === 'minutes') {
            m += delta;
            if (m < 0) { m = 59; h = Math.max(0, h - 1); }
            if (m > 59) { m = 0; h = Math.min(99, h + 1); }
        }
        if (unit === 'seconds') {
            s += delta;
            if (s < 0) { s = 59; m -= 1; if (m < 0) { m = 59; h = Math.max(0, h - 1); } }
            if (s > 59) { s = 0; m += 1; if (m > 59) { m = 0; h = Math.min(99, h + 1); } }
        }

        this.hoursEl.textContent = h.toString().padStart(2, '0');
        this.minutesEl.textContent = m.toString().padStart(2, '0');
        this.secondsEl.textContent = s.toString().padStart(2, '0');

        this.remainingTime = this.getTotalSeconds();
        this.updateDisplay();
        this.updatePhase();
    }

    start() {
        if (this.isRunning || this.remainingTime <= 0) return;

        this.isRunning = true;
        this.startBtn.disabled = true;
        this.pauseBtn.disabled = false;
        this.titleEl.textContent = "Time Left";

        this.interval = setInterval(() => {
            this.remainingTime--;
            if (this.remainingTime <= 0) {
                this.completeTimer();
                return;
            }
            this.updateDisplay();
            this.updatePhase();

            if (this.remainingTime <= 10) {
                this.timerEl.classList.add('warning');
            }
        }, 1000);
    }

    pause() {
        if (!this.isRunning) return;
        clearInterval(this.interval);
        this.isRunning = false;
        this.startBtn.disabled = false;
        this.pauseBtn.disabled = true;
        this.titleEl.textContent = "Paused";
        this.timerEl.classList.remove('warning');
        this.updatePhase();
    }

    reset() {
        clearInterval(this.interval);
        this.isRunning = false;
        this.remainingTime = this.getTotalSeconds();
        this.updateDisplay();
        this.titleEl.textContent = "Timer";
        this.timerEl.classList.remove('warning');
        this.phaseEl.textContent = '';
        this.startBtn.disabled = false;
        this.pauseBtn.disabled = true;
    }

    completeTimer() {
        clearInterval(this.interval);
        this.remainingTime = 0;
        this.updateDisplay();
        this.titleEl.textContent = "Complete!";
        this.phaseEl.textContent = "Timer Complete!";
        this.blinkTimer();
        this.playSound();
    }

    blinkTimer() {
        let count = 0;
        const blink = setInterval(() => {
            this.timerEl.classList.toggle('warning');
            count++;
            if (count >= 10) {
                clearInterval(blink);
                this.timerEl.classList.remove('warning');
            }
        }, 500);
    }

    updateDisplay() {
        const h = Math.floor(this.remainingTime / 3600);
        const m = Math.floor((this.remainingTime % 3600) / 60);
        const s = this.remainingTime % 60;
        this.timerEl.textContent = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    }

    updatePhase() {
        if (this.remainingTime <= 0) {
            this.phaseEl.textContent = '';
            return;
        }
        const now = new Date();
        const end = new Date(now.getTime() + this.remainingTime * 1000);
        let h = end.getHours();
        let m = end.getMinutes();
        const ampm = h >= 12 ? 'PM' : 'AM';
        const displayH = h % 12 || 12;
        this.phaseEl.textContent = `Ends at: ${displayH.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')} ${ampm}`;
    }

    playSound() {
        if (!this.audioEl) return;
        this.audioEl.currentTime = 0;
        this.audioEl.play().catch(()=>{}); // avoid errors if blocked
    }
}

document.addEventListener('DOMContentLoaded', () => new SCATimer());

</script>

</body>
</html>
